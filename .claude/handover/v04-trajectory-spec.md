# v0.4 弾道システム仕様書作成 - 引き継ぎ

**作成日**: 2026-01-09
**ステータス**: 仕様書作成開始前

---

## 概要

v0.4で弾道システムを改善する。固定角度発射から「着地点逆算型発射」への変更。

## 完了した作業

- [x] 現状調査（shot_direction.rs, ball_trajectory.rs, game_config.ron）
- [x] 要件の対話的確認
  - 自動着地計算（入力→着地地点→角度逆算）
  - スピン考慮（トップスピン/スライスの軌道変化）
  - 初速は角度主体で微調整（テニス的）
- [x] プランファイル作成

## 次のアクション

1. `30012_v04_scope.md` 作成（v0.4スコープ定義）
2. `30605_trajectory_calculation_spec.md` 作成（弾道計算仕様書）

## 重要な決定事項

### 着地地点マッピング

| 入力 | 着地位置 |
|-----|---------|
| ニュートラル | サービスライン付近・中央 |
| 前入力 | ネット際（ドロップ） |
| 後入力 | ベースライン際（深い球） |
| 左右入力 | サイドライン際 |

### 初速の設計方針

| 要素 | 影響 | 係数 |
|------|------|------|
| 球種 | フラット > トップスピン > スライス | 1.0 / 0.92 / 0.88 |
| 距離 | 遠いと若干強め | 1.0〜1.15 |
| タイミング | 既存power属性で反映 | - |

### 弾道逆算

- 角度主体（5°〜60°）
- スピンによる有効重力変動を考慮
- 放物線公式で角度を逆算

## 参照ファイル

- **プランファイル**: `.claude/plans/binary-squishing-fairy.md`
- **現行実装**: `project/src/systems/shot_direction.rs`
- **物理設定**: `project/assets/config/game_config.ron`
- **ショット属性仕様**: `project/docs/3_ingame/306_shot_system/30604_shot_attributes_spec.md`

## 再開コマンド

```
/resume-handover
```

プランファイルと本ファイルを読んでから仕様書作成を継続してください。
