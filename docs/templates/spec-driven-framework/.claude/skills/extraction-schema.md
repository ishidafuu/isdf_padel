# 仕様抽出スキーマ（Extraction Schema）

参照ゲームから仕様を抽出する際のフレームワーク。

---

## 基本原則

### 対話ファースト

仕様抽出は**ユーザーとの対話**を最優先とする。チェックリストに頼る前に、まず以下を確認：

1. **何を知りたいか？** - ユーザーの目的を明確化
2. **何が重要か？** - このゲームのコア体験は何か
3. **何を再現したいか？** - 新規ゲームで参考にする部分

### 完璧より対話

- 網羅的なチェックリストを埋めることが目的ではない
- ユーザーが「これが知りたい」と言った部分を深掘りする
- 不明点は「不明」と記録し、ユーザーに確認を促す

---

## 対話による抽出フロー

### Phase 1: 目的の確認

```
エージェント: 「このゲームの何を記録したいですか？」

ユーザーの回答例:
- 「ジャンプの挙動を参考にしたい」
- 「全体的なゲームフローを把握したい」
- 「UI のレイアウトを参考にしたい」
- 「敵の AI パターンを調べたい」

→ ユーザーの回答に基づいて抽出範囲を決定
```

### Phase 2: 重点領域の特定

```
エージェント: 「[ユーザーの目的] について、特に知りたい点はありますか？」

深掘り質問の例:
- 「数値（速度、高さ等）まで調べますか？」
- 「エッジケース（特殊な状況）も記録しますか？」
- 「他の機能との連携も含めますか？」

→ 詳細度と範囲を調整
```

### Phase 3: 情報収集

ユーザーから提供される情報を受け取り、構造化：

| 情報源 | 対応方法 |
|-------|---------|
| 画像 | 視覚情報を言語化、数値を読み取り |
| 説明 | 要点を整理、不明点を質問 |
| Web情報 | 要約・構造化、確度を判定 |
| 記憶 | 要確認としてマーク |

### Phase 4: 確認と補完

```
エージェント: 「以下の理解で合っていますか？」

[抽出結果のサマリを提示]

- 合っている点: そのまま記録
- 違う点: 修正して記録
- 追加情報: ユーザーから補足を受ける
```

---

## 抽出カテゴリ（汎用フレームワーク）

ジャンルを問わず適用できる抽象的なカテゴリ：

### 1. コアループ

ゲームの中心的な体験サイクル：

```
質問例:
- 「このゲームで繰り返し行う基本的な行動は？」
- 「プレイヤーは何をして、何を得る？」
- 「1プレイ/1ステージ/1ターンの流れは？」
```

### 2. インタラクション

プレイヤーの操作と応答：

```
質問例:
- 「プレイヤーはどうやって操作する？」
- 「入力に対してどんな反応がある？」
- 「フィードバック（音、視覚効果等）は？」
```

### 3. 進行システム

ゲームの進行と状態変化：

```
質問例:
- 「ゲームはどう進行する？」
- 「クリア/失敗の条件は？」
- 「セーブ/ロードの仕組みは？」
```

### 4. リソース管理

ゲーム内で管理されるもの：

```
質問例:
- 「プレイヤーが管理するリソースは？」
- 「リソースはどう増減する？」
- 「リソースが尽きるとどうなる？」
```

### 5. 空間と移動

ゲーム世界の構造：

```
質問例:
- 「ゲーム世界はどう構成されている？」
- 「プレイヤーはどう移動する？」
- 「移動の制約は？」
```

### 6. エンティティと関係

ゲーム内の存在とその関係：

```
質問例:
- 「ゲームに登場するものは？」
- 「プレイヤーと他のエンティティの関係は？」
- 「エンティティ同士はどう影響し合う？」
```

---

## 確度の記録

### 確度判定フロー

```
情報源を確認
    │
    ├─ 画像/コードで直接確認 → ★★★★★ 確認済
    │
    ├─ 複数ソースで一致 → ★★★★☆ 高確度
    │
    ├─ 単一の信頼できるソース → ★★★☆☆ 中確度
    │
    ├─ 観察からの推測 → ★★☆☆☆ 推測
    │
    └─ ユーザーの記憶/伝聞 → ★☆☆☆☆ 要確認
```

### 確度レベル

| レベル | 表記 | 判定基準 |
|--------|------|---------|
| ★★★★★ | 確認済 | 直接確認可能な証拠あり |
| ★★★★☆ | 高確度 | 複数の情報源で一致 |
| ★★★☆☆ | 中確度 | 単一の信頼できる情報源 |
| ★★☆☆☆ | 推測 | 間接的な観察から推測 |
| ★☆☆☆☆ | 要確認 | ユーザーに確認が必要 |

### 記載テンプレート

```markdown
## [項目名]

- **値/内容**: [記録内容]
- **確度**: ★★★☆☆
- **情報源**: [画像/Web/説明/記憶]
- **備考**: [補足があれば]
```

---

## ジャンル別の着眼点（参考）

以下はあくまで参考。ユーザーとの対話で必要な部分のみ使用する。

### アクション系

- 操作のレスポンス感
- 当たり判定の感覚
- 無敵時間やキャンセルタイミング

### パズル系

- ルールの説明方法
- 難易度の段階設計
- ヒントシステム

### RPG系

- 成長の実感ポイント
- 探索と報酬のバランス
- ストーリーとゲームプレイの統合

### シミュレーション系

- 情報の可視化方法
- 意思決定のフィードバック
- 時間経過の表現

### カジュアル/モバイル系

- 1プレイの長さ
- 復帰プレイヤーへの配慮
- 課金要素の設計（参考として）

---

## 出力形式

### 基本テンプレート

```markdown
# [機能/システム名]

## 情報源
- 種別: [画像/Web/説明/記憶]
- 確度: ★★★☆☆
- 参照: [URLや画像参照]

## 概要

[1-2文で要約]

## 詳細

[ユーザーとの対話で明らかになった内容]

## パラメータ（該当する場合）

| 項目 | 値 | 確度 | 備考 |
|-----|-----|------|------|
| xxx | yyy | ★★★ | zzz |

## 不明点

- [ ] [確認が必要な項目]
- [ ] [追加調査が必要な項目]

## ユーザーからの補足

[対話で得られた追加情報]
```

---

## 対話のコツ

### 良い質問の例

- 「このゲームで一番気持ちいい瞬間は？」
- 「初めてプレイした人が戸惑うところは？」
- 「このゲームならではの特徴は？」
- 「似たゲームと比べて違う点は？」

### 避けるべきこと

- チェックリストを機械的に埋める
- ユーザーが興味のない部分を詳細に聞く
- 確認せずに推測を事実として記録する

### 記録のバランス

```
重要度高 + 確度高 → 詳細に記録
重要度高 + 確度低 → 記録 + 要確認マーク
重要度低 + 確度高 → 簡潔に記録
重要度低 + 確度低 → 記録しない or 最小限
```

---

## 注意事項

1. **対話を優先**: チェックリストは補助、対話が主
2. **ユーザーの目的に沿う**: 網羅性より目的適合性
3. **確度を明記**: 推測と事実を区別
4. **更新を前提**: 新情報で随時更新
5. **完璧を求めない**: 不明点は不明と記録

---

## 関連ドキュメント

- `project/docs/9_reference/90000_overview.md` - リファレンス層の説明
