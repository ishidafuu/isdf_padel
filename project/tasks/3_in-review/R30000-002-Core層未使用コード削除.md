---
id: "R30000-002"
title: "Core層未使用コード削除"
type: "refactor"
status: "in-review"
priority: "low"
related_task: null
spec_ids: []
blocked_by: []
blocks: []
branch_name: null
worktree_path: null
plan_file: null
tags: ["cleanup", "dead-code", "core"]
parent_task_id: null
audit_source: "2026-01-08"
severity: "minor"
category: "code-quality"
created_at: "2026-01-08T00:00:00+09:00"
updated_at: "2026-01-08T00:00:00+09:00"
completed_at: null
---

# Task R30000-002: Core層未使用コード削除

## Summary

Core層（`core/`）内の未使用関数・メソッド・構造体を削除し、コードベースをクリーンに保つ。

## 検出された問題

### core/utils.rs

| 行 | 項目 | 状態 |
|----|------|------|
| 7 | `reflect()` | 未使用 |
| 12 | `distance_2d()` | 未使用 |
| 17 | `distance_xz()` | 未使用 |

### core/court.rs

| 行 | 項目 | 状態 |
|----|------|------|
| 75 | `is_inside()` | 未使用 |
| 75 | `is_within_x()` | 未使用 |
| 75 | `is_within_y()` | 未使用 |
| 75 | `is_within_z()` | 未使用 |
| 128 | `height` フィールド | 未読み取り |
| 144 | `is_collision()` | 未使用 |
| 171 | `Court` 構造体 | 未構築 |
| 178 | `Court::from_config()` | 未使用 |
| 178 | `Court::get_court_side()` | 未使用 |

### core/wall.rs

| 行 | 項目 | 状態 |
|----|------|------|
| 98 | `reflect()` | 未使用 |

**深刻度**: MINOR

## 修正方針

### 判断基準

1. **将来使用予定あり** → `#[allow(dead_code)]` を付与してコメントで理由記載
2. **将来使用予定なし** → 削除

### 推奨アクション

- `utils.rs` の関数群: 将来の物理計算で使う可能性あり → 保留または `#[allow(dead_code)]`
- `Court` 構造体: 未使用かつ `CourtBounds` と重複 → 削除推奨
- `NetInfo::is_collision()`: ネット衝突判定で使用予定 → 保留

## Progress

### Completed

1. **core/utils.rs**: ファイル全体を削除
   - `reflect()`, `distance_2d()`, `distance_xz()` はBevy標準機能で代用可能
   - `core/mod.rs` からモジュール宣言も削除

2. **core/court.rs**:
   - `Court` 構造体を削除（`CourtBounds` と重複）
   - 関連テストを `determine_court_side()` 使用に書き換え
   - `is_inside()`, `is_within_x()`, `is_within_y()`, `is_within_z()` に `#[allow(dead_code)]` 付与
   - `NetInfo::height` フィールドに `#[allow(dead_code)]` 付与
   - `NetInfo::is_collision()` に `#[allow(dead_code)]` 付与

3. **core/wall.rs**:
   - `WallReflection::reflect()` に `#[allow(dead_code)]` 付与

4. **systems/boundary.rs**:
   - `Court` インポートを `determine_court_side` に変更
   - 関連テストを `determine_court_side()` 使用に書き換え

## Next Actions

（完了）

## 完了チェックリスト

> このタスクは in-review 経由必須

- [x] ビルド成功（`cargo build`）
- [x] Core層の未使用警告が解消
- [x] in-review に移動済み
- [ ] レビュー完了
