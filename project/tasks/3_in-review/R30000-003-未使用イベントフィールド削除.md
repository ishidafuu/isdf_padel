---
id: "R30000-003"
title: "未使用イベントフィールド削除"
type: "refactor"
status: "in-review"
priority: "low"
related_task: null
spec_ids: []
blocked_by: []
blocks: []
branch_name: null
worktree_path: null
plan_file: null
tags: ["cleanup", "dead-code", "events"]
parent_task_id: null
audit_source: "2026-01-08"
severity: "minor"
category: "code-quality"
created_at: "2026-01-08T00:00:00+09:00"
updated_at: "2026-01-08T00:00:00+09:00"
completed_at: null
---

# Task R30000-003: 未使用イベントフィールド削除

## Summary

`core/events.rs` 内の未読み取りイベントフィールドと未使用イベント型を削除する。
イベントは発行されているが、フィールドが読み取られていない状態。

## 検出された問題

### 未読み取りフィールド

| 行 | イベント | フィールド |
|----|----------|-----------|
| 17 | `PlayerMoveEvent` | `player_id`, `position`, `velocity` |
| 29 | `PlayerJumpEvent` | `player_id`, `jump_velocity` |
| 39 | `PlayerLandEvent` | `player_id`, `land_position` |
| 49 | `BallHitEvent` | `ball_id` |
| 63 | `PlayerKnockbackEvent` | `player_id`, `knockback_velocity`, `duration`, `invincibility_time` |
| 121 | `WallReflectionEvent` | `ball`, `wall_type`, `contact_point`, `incident_velocity`, `reflected_velocity` |
| 139 | `BallOutOfBoundsEvent` | `contact_point` |
| 159 | `GroundBounceEvent` | `ball` |
| 186 | `ShotExecutedEvent` | `shot_velocity`, `is_jump_shot` |
| 238 | `GameWonEvent` | `winner`, `games_won` |
| 248 | `SetWonEvent` | `winner`, `sets_won` |
| 259 | `MatchWonEvent` | `winner` |
| 271 | `MatchStartEvent` | `first_server` |
| 282 | `FaultEvent` | `fault_count`, `reason` |

### 未使用イベント型

| 行 | イベント型 | 状態 |
|----|-----------|------|
| 264 | `MatchEndEvent` | 未使用 |
| 294 | `FaultReason::NetFault` | 未構築 |

**深刻度**: MINOR

## 修正方針

### アプローチ

イベントフィールドは将来のデバッグやログ出力で使用する可能性があるため、
単純削除ではなく以下のアプローチを推奨：

1. **実際に不要なフィールド** → 削除
2. **将来使用予定あり** → `#[allow(dead_code)]` + コメント
3. **デバッグ用途** → `#[cfg(debug_assertions)]` で条件付きコンパイル

### 優先対応

- `MatchEndEvent` 型エイリアス → 削除（`MatchWonEvent` と重複）
- `FaultReason::NetFault` → 仕様確認後に削除または実装

## Progress

### Completed

- [x] 各イベントの仕様書と使用状況を調査
- [x] 未使用フィールドに `#[allow(dead_code)]` を付与
  - PlayerMoveEvent: player_id, position, velocity
  - PlayerJumpEvent: player_id, jump_velocity
  - PlayerLandEvent: player_id, land_position
  - BallHitEvent: ball_id
  - PlayerKnockbackEvent: player_id, knockback_velocity, duration, invincibility_time
  - WallReflectionEvent: ball, wall_type, contact_point, incident_velocity, reflected_velocity
  - NetHitEvent: contact_point
  - GroundBounceEvent: bounce_point
  - BallOutOfBoundsEvent: ball
  - ShotExecutedEvent: shot_velocity, is_jump_shot
  - GameWonEvent: winner, games_won
  - SetWonEvent: winner, sets_won
  - MatchWonEvent: winner
  - MatchStartEvent: first_server
  - FaultEvent: fault_count, reason
- [x] MatchEndEvent 型エイリアスを削除
- [x] WallType のメソッド（normal, is_side_wall, is_back_wall）に `#[allow(dead_code)]` を付与
- [x] FaultReason::NetFault に `#[allow(dead_code)]` を付与（仕様書定義済み、将来実装予定）
- [x] match_flow.rs のコメントを MatchEndEvent → MatchWonEvent に修正
- [x] ビルド成功確認

## 完了チェックリスト

> このタスクは in-review 経由必須

- [x] ビルド成功（`cargo build`）
- [x] events.rs の未使用警告が解消
- [x] in-review に移動済み
- [ ] レビュー完了
