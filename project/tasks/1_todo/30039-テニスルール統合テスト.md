---
id: "30039"
title: "テニスルール統合テスト"
type: "game-dev"
status: "todo"
priority: "high"
related_task: null
spec_ids: ["30009"]
blocked_by: ["30038"]
blocks: []
branch_name: null
worktree_path: null
plan_file: "~/.claude/plans/structured-purring-narwhal.md"
tags: ["tennis", "test", "integration"]
parent_task_id: null
created_at: "2026-01-08T16:00:00"
updated_at: "2026-01-08T16:00:00"
completed_at: null
---

# Task 30039: テニスルール統合テスト

## Summary

パデル→テニス変更後の全体動作確認。
テニスルールでラリーが成立し、正しくポイントが進行することを検証。

## Related Specifications

- `project/docs/3_ingame/30009_mvp_scope.md` - MVPスコープ（テニス版）

## Progress

### Completed

（なし）

## Next Actions

1. 既存テストの更新（壁関連テスト削除）
2. アウト判定テスト追加
3. ラリーテスト（テニスルール確認）
4. AI挙動調整・確認
5. ゲームプレイ調整（パラメータ微調整）

## Dependencies

- **Blocked By:** 30038（コートサイズ調整が先）
- **Blocks:** なし（最終タスク）

## Detailed Implementation Plan

### テスト項目

#### 1. 基本動作確認

- [ ] ゲーム起動・初期化
- [ ] プレイヤー移動（新コートサイズで正常動作）
- [ ] ボール軌道（壁反射なし、重力のみ）
- [ ] ショット実行（相手コートへ飛ぶ）

#### 2. アウト判定テスト

- [ ] サイドライン外アウト → 正しく失点
- [ ] ベースライン外アウト → 正しく失点
- [ ] コート内着地 → 失点にならない
- [ ] ネット手前落下 → 正しく失点

#### 3. ラリーテスト

- [ ] サーブ→レシーブ→ラリー継続
- [ ] ツーバウンド → 正しく失点
- [ ] ネットイン → 正しく失点
- [ ] アウト → 正しく失点

#### 4. スコアリングテスト

- [ ] ポイント進行（0→15→30→40→Game）
- [ ] ゲーム獲得
- [ ] セット獲得
- [ ] 試合終了

#### 5. AI動作確認

- [ ] AIがボールを追跡
- [ ] AIがショットを返球
- [ ] AIがコート内に留まる

### 修正対象ファイル

| ファイル | 変更内容 |
|---------|---------|
| `project/tests/` | 壁関連テスト削除、アウトテスト追加 |
| `project/src/systems/ai_movement.rs` | 移動範囲・速度調整 |
| `project/src/systems/ai_shot.rs` | 戦略調整（必要に応じて） |
| `project/assets/config/game_config.ron` | パラメータ微調整 |

### パラメータ調整候補

- ボール速度（広いコートに合わせて高速化）
- プレイヤー移動速度（広いコートに合わせて高速化）
- AI反応速度・難易度

## 完了チェックリスト

> このタスクは in-review 経由必須

- [ ] ビルド成功（`cargo build`）
- [ ] テスト全PASS（`cargo test`）
- [ ] in-review に移動済み
- [ ] レビュー完了

## メモ

- 統合テストは最後のタスク（全変更が完了してから実行）
- ゲームプレイの「楽しさ」を確認（パラメータ調整）
- 問題があれば前のタスクに戻って修正
