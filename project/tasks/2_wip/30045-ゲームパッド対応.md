# 30045: ゲームパッド対応

## 概要

Player2をゲームパッドで操作可能にする。

## 要件

| 項目 | 内容 |
|------|------|
| スコープ | v0.4に追加 |
| 対応範囲 | 1コントローラー |
| 割当方式 | 固定（Player1=キーボード、Player2=ゲームパッド） |

## 完了条件

- [x] 仕様書更新（20006_input_system.md）
- [x] v0.4スコープ更新（30012_v04_scope.md）
- [x] データ定義更新（80101_game_constants.md）
- [x] GamepadButtonsConfig構造体追加（config.rs）
- [x] game_config.ronにゲームパッド設定追加
- [x] gamepad_input_system実装（新規）
- [x] Player2をHumanControlled(device_id=1)に変更
- [ ] 動作確認（ゲームパッドで移動・ジャンプ・ショット）※手動確認必要

## 実装フェーズ

### Phase 1: 仕様書更新

1. `20006_input_system.md` - REQ-20006-050〜053追加
2. `30012_v04_scope.md` - 入力拡張セクション追加
3. `80101_game_constants.md` - GamepadButtonsConfig定義

### Phase 2: データ構造追加

1. `config.rs` - GamepadButtonsConfig構造体
2. `game_config.ron` - gamepad_buttonsセクション

### Phase 3: システム実装

1. `gamepad_input.rs` - 新規作成
2. `mod.rs` - モジュール追加
3. `main.rs` - システム登録・Player2変更

### Phase 4: 検証

1. ゲームパッド接続してゲーム起動
2. Player2の操作確認

## 修正対象ファイル

| ファイル | 変更内容 |
|----------|---------|
| `project/docs/2_architecture/20006_input_system.md` | ゲームパッド対応要件追加 |
| `project/docs/3_ingame/30012_v04_scope.md` | 入力拡張セクション追加 |
| `project/docs/8_data/80101_game_constants.md` | GamepadButtonsConfig定義 |
| `project/src/resource/config.rs` | GamepadButtonsConfig構造体追加 |
| `project/assets/config/game_config.ron` | gamepad_buttonsセクション追加 |
| `project/src/systems/gamepad_input.rs` | 新規作成 |
| `project/src/systems/mod.rs` | モジュール追加 |
| `project/src/main.rs` | システム登録・Player2変更 |

## 関連ドキュメント

- [計画ファイル](~/.claude/plans/quiet-marinating-pancake.md)
- [20006_input_system.md](../../docs/2_architecture/20006_input_system.md)

## ステータス

- **作成日**: 2026-01-09
- **状態**: ready
