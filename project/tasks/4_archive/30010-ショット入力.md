---
id: "30010"
title: "ショット入力"
type: "game-dev"
status: "done"
priority: "high"
spec_ids: ["30601"]
blocked_by: ["30004", "30007"]
blocks: ["30011", "30012", "30016"]
branch_name: null
worktree_path: null
plan_file: null
tags: ["shot", "mvp", "phase2"]
created_at: "2026-01-06T20:00:00+09:00"
updated_at: "2026-01-07T00:00:00+09:00"
completed_at: "2026-01-07T00:00:00+09:00"
---

# Task 30010: ショット入力

## Summary

プレイヤーのショット入力（Bボタン）を実装する。

## Related Specifications

- [30601_shot_input_spec.md](../../docs/3_ingame/306_shot_system/30601_shot_input_spec.md)

## 実装内容

- [x] REQ-30601-001: ショットボタン検出（Fキー/Numpad1）
- [x] REQ-30601-002: タイミング判定（距離）- MaxDistance 1.5m
- [x] REQ-30601-003: タイミング判定（高さ差）- MaxHeightDiff 2.0m
- [x] REQ-30601-004: クールダウン管理 - 0.5秒
- [x] REQ-30601-005: ふっとばし中のショット禁止
- [x] REQ-30601-006: ShotEvent 発行

## 実装ファイル

- `src/components/mod.rs` - ShotState コンポーネント追加
- `src/core/events.rs` - ShotEvent 追加
- `src/systems/shot_input.rs` - ショット入力システム（新規作成）
- `src/systems/mod.rs` - shot_input モジュールをエクスポート
- `src/main.rs` - システム登録

## Dependencies

- **Blocked By:** 30004（プレイヤー移動）, 30007（ボール軌道）
- **Blocks:** 30011, 30012, 30016

## メモ

- Player 1: Fキー, Player 2: Numpad1/右Shift
- config.shot.max_distance, cooldown_time を参照
- ボールが近くにある時のみショット可能
- ふっとばし中、クールダウン中はショット不可
