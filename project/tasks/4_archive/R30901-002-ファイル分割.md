---
id: "R30901-002"
title: "point_judgment.rs分割リファクタ"
type: "refactor"
status: "done"
priority: "medium"
related_task: "30019"
spec_ids: ["30901"]
blocked_by: ["R30901-001"]
blocks: []
branch_name: "task/R30901-002"
worktree_path: ".worktrees/R30901-002"
plan_file: null
tags: ["systems", "architecture", "large-file", "audit"]
parent_task_id: null
created_at: "2026-01-08T00:00:00"
updated_at: "2026-01-09T00:00:00"
completed_at: "2026-01-09T00:00:00"
---

# Task R30901-002: point_judgment.rs分割リファクタ

## Summary

audit-agent による監査で検出された問題。
`point_judgment.rs` が635行と大きく、責務過多の可能性がある。

## 実施内容

point_judgment.rsを責務別に4ファイルへ分割:

| ファイル | 行数 | 責務 |
|---------|------|------|
| mod.rs | 66行 | Plugin定義、update_last_shooter_system |
| bounce_judgment.rs | 196行 | バウンド判定系（count_update, double_bounce, own_court_hit） |
| net_judgment.rs | 136行 | ネット判定系（let, net_fault） |
| out_judgment.rs | 301行 | アウト判定系（out_of_bounds, wall_hit） |

当初案にあった `winner_logic.rs` は不要（各判定内でRallyEndEvent発行）。

## Related Specifications

- [30901_point_judgment_spec.md](../../docs/3_ingame/309_referee/30901_point_judgment_spec.md)

## 完了チェックリスト

> このタスクは in-review 経由必須

- [x] ビルド成功（`cargo build`）
- [x] テスト全PASS（`cargo test`）- 135テスト
- [x] in-review に移動済み
- [x] レビュー完了

## メモ

- R30901-001 完了後に着手（unwrap安全化と同時に行うと混乱）
- 分割粒度は仕様書のセクション構造を参考に
- 元635行 → 各ファイル300行以下達成
