---
id: "R30502-001"
title: "廃止仕様参照の更新"
type: "refactor"
status: "done"
priority: "high"
related_task: "30002"
spec_ids: ["30501"]
blocked_by: []
blocks: []
branch_name: null
worktree_path: null
plan_file: null
tags: ["core", "wall", "deprecated", "audit"]
parent_task_id: null
created_at: "2026-01-08T00:00:00"
updated_at: "2026-01-08T00:00:00"
completed_at: "2026-01-08T00:00:00"
---

# Task R30502-001: 廃止仕様参照の更新

## Summary

audit-agent による監査で検出された問題。
`wall.rs` と `events.rs` が廃止された `30502_wall_design.md` を参照している。

## 検出箇所

| ファイル | 行 | 参照先 |
|----------|-----|--------|
| `project/src/core/wall.rs` | 2 | `@spec 30502_wall_design.md` |
| `project/src/core/events.rs` | 3 | `@spec 30502_wall_design.md` |

## Related Specifications

- [30501_court_spec.md](../../docs/3_ingame/305_court/30501_court_spec.md) - 代替仕様書
- [30503_boundary_behavior.md](../../docs/3_ingame/305_court/30503_boundary_behavior.md) - 境界動作

## Next Actions

1. `wall.rs` の @spec コメントを `30501_court_spec.md` または `30503_boundary_behavior.md` に更新
2. `events.rs` の @spec コメントを適切な仕様書に更新
3. 参照している BEH-ID や DES-ID の対応を確認

## 完了チェックリスト

> このタスクは in-review 経由必須

- [x] ビルド成功（`cargo build`）
- [x] テスト全PASS（`cargo test`）
- [x] in-review に移動済み
- [x] レビュー完了

## 実施内容

### wall.rs
- `@spec 30502_wall_design.md` → `@spec 30503_boundary_behavior.md` に更新
- `BEH-30502-001/002/003` → `BEH-30503-004`（壁反射判定）に統合
- `BEH-30502-004` → `BEH-30503-007`（境界チェック優先順位）に更新
- テスト関数名を更新（`test_beh_30502_*` → `test_beh_30503_*`）
- 冗長な@spec参照（3行連続）を1行に統合

### events.rs
- `@spec 30502_wall_design.md` → `@spec 30503_boundary_behavior.md` に更新
- `DES-30502-001/002/003` → `BEH-30503-004` に統合

## メモ

- `30502_wall_design.md` は `_deprecated/` に移動済み
- 壁反射ロジックの仕様は `30501_court_spec.md#REQ-30501-007` に統合された可能性あり
