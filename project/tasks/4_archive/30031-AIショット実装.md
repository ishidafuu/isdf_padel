---
id: "30031"
title: "AIショット実装"
type: "game-dev"
status: "done"
priority: "medium"
related_task: null
spec_ids: ["30302"]
blocked_by: ["30030"]
blocks: []
branch_name: null
worktree_path: null
plan_file: null
tags: ["ai", "shot", "mvp"]
parent_task_id: null
created_at: "2026-01-08T12:00:00"
updated_at: "2026-01-08T14:00:00"
completed_at: null
---

# Task 30031: AIショット実装

## Summary

AIキャラクターのショット判断と実行機能を実装します。

ボールが近づいたら相手コート中央に向けてショットを打つ基本的な返球ロジックを実現します。

## Related Specifications

- [30302_ai_shot_spec.md](../../docs/3_ingame/303_ai/30302_ai_shot_spec.md) - AIショット仕様

## Target Requirements (MVP v0.1)

| REQ-ID | 内容 |
|--------|------|
| REQ-30302-001 | ショット可能判定 |
| REQ-30302-002 | ショット実行 |
| REQ-30302-003 | 打球方向（相手コート中央） |
| REQ-30302-004 | クールダウン管理 |
| REQ-30302-005 | ジャンプショット禁止（MVP） |

## Implementation Checklist

- [x] AiShotSystemの作成
  - [x] ショット可能判定（距離＋高さ）
  - [x] ShotEvent発行
  - [x] 打球方向計算（相手コート中央）
  - [x] クールダウン管理
- [x] ~~AiControllerにクールダウンフィールド追加~~ → 既存のShotStateを使用
- [x] GameConfig への AI ショットパラメータ追加
  - [x] `ai.shot_cooldown`
- [x] `@spec` コメント付与

## Progress

### Completed

- `project/src/systems/ai_shot.rs` - AIショットシステム作成
- `project/src/resource/config.rs` - AiConfig に shot_cooldown 追加
- `project/src/systems/mod.rs` - ai_shot モジュール追加
- `project/src/main.rs` - ai_shot_system 登録
- `project/assets/config/game_config.ron` - ai セクション追加

## Next Actions

- レビュー完了後、done に移動

## Dependencies

- **Blocked By:** 30030（AI移動実装）
- **Blocks:** なし

## 完了チェックリスト

> このタスクは in-review 経由必須

- [x] ビルド成功（`cargo build`）
- [x] テスト全PASS（`cargo test`）- 122 tests passed
- [x] in-review に移動済み
- [x] レビュー完了

## メモ

- MVP v0.1ではジャンプショット禁止（jumpHeight = 0）
- ショット属性システム対応・難易度調整はv0.2
- AI移動が完了してから着手すること
- 既存のShotStateコンポーネントを再利用（PlayerBundleに含まれる）
