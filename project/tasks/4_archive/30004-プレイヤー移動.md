---
id: "30004"
title: "プレイヤー移動"
type: "game-dev"
status: "done"
priority: "high"
spec_ids: ["30201"]
blocked_by: ["30001"]
blocks: ["30005", "30006", "30009", "30010"]
branch_name: "task/30004-player-movement"
worktree_path: null
plan_file: null
tags: ["player", "mvp", "phase1"]
created_at: "2026-01-06T20:00:00+09:00"
updated_at: "2026-01-07T00:00:00+09:00"
completed_at: "2026-01-07T00:10:00+09:00"
---

# Task 30004: プレイヤー移動

## Summary

プレイヤーの3軸移動（X/Z軸）を実装する。

## Related Specifications

- [30201_movement_spec.md](../../docs/3_ingame/302_player/30201_movement_spec.md)

## 実装内容

- [x] REQ-30201-001: 左右移動（X軸）
- [x] REQ-30201-002: 前後移動（Z軸）
- [x] REQ-30201-003: 移動速度の統一（斜め移動正規化）
- [x] REQ-30201-004: 境界での停止
- [x] REQ-30201-005: ふっとばし中の移動制限
- [x] REQ-30201-006: PlayerMoveEvent 発行

## Dependencies

- **Blocked By:** 30001（コート境界）
- **Blocks:** 30005, 30006, 30009, 30010

## 実装サマリ

### 追加ファイル
- `src/components/mod.rs` - Player, Velocity, KnockbackState コンポーネント
- `src/systems/movement.rs` - 移動システム（read_input_system, movement_system）

### 変更ファイル
- `src/core/events.rs` - PlayerMoveEvent 追加
- `src/systems/mod.rs` - movement モジュール公開
- `src/main.rs` - システム登録、プレイヤー生成

### 入力マッピング
- Player 1: WASD キー
- Player 2: 矢印キー

## メモ

- config.Player.MoveSpeedX, MoveSpeedZ を参照
- 即座移動（加速・減速なし）
