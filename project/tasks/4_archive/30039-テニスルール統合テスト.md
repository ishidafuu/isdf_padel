---
id: "30039"
title: "テニスルール統合テスト"
type: "game-dev"
status: "done"
priority: "high"
related_task: null
spec_ids: ["30009"]
blocked_by: ["30038"]
blocks: []
branch_name: null
worktree_path: null
plan_file: "~/.claude/plans/structured-purring-narwhal.md"
tags: ["tennis", "test", "integration"]
parent_task_id: null
created_at: "2026-01-08T16:00:00"
updated_at: "2026-01-08T18:30:00"
completed_at: "2026-01-08T18:30:00"
---

# Task 30039: テニスルール統合テスト

## Summary

パデル→テニス変更後の全体動作確認。
テニスルールでラリーが成立し、正しくポイントが進行することを検証。

## Related Specifications

- `project/docs/3_ingame/30009_mvp_scope.md` - MVPスコープ（テニス版）

## Progress

### Completed

- [x] ビルド成功（cargo build）
- [x] テスト全PASS（cargo test - 135件）
- [x] ゲーム起動・動作確認
- [x] WORLD_SCALE調整（100→50）でコートが画面に収まるよう修正
- [x] 影サイズ調整（スケール変更に合わせて）
- [x] テニスルール動作確認（壁ヒット→アウト判定）

### 確認済み動作

#### 1. 基本動作確認

- [x] ゲーム起動・初期化
- [x] プレイヤー移動（新コートサイズで正常動作）
- [x] ボール軌道（壁反射→アウト判定）
- [x] ショット実行（相手コートへ飛ぶ）

#### 2. アウト判定テスト

- [x] サイドライン外アウト → 正しく失点
- [x] ベースライン外アウト → 正しく失点（WallReflectionEvent→Out判定）
- [x] コート内着地 → 失点にならない
- [x] ネット手前落下 → 正しく失点

#### 3. ラリーテスト

- [x] サーブ→レシーブ→ラリー継続
- [x] ツーバウンド → 正しく失点
- [x] アウト → 正しく失点

#### 4. スコアリングテスト

- [x] ポイント進行（0→15→30→40→Game）
- [x] フォルト・ダブルフォルト判定

#### 5. AI動作確認

- [x] AIがボールを追跡
- [x] AIがショットを返球
- [x] AIがコート内に留まる

## Dependencies

- **Blocked By:** 30038（コートサイズ調整が先）- 完了
- **Blocks:** なし（最終タスク）

## 変更ファイル

| ファイル | 変更内容 |
|---------|---------|
| `project/src/presentation/mod.rs` | WORLD_SCALE 100→50 |
| `project/assets/config/game_config.ron` | 影サイズ調整 |

## メモ

- テニスルール（壁ヒット→アウト）は正常動作
- コート12x16がウィンドウ1280x720に収まるようスケール調整
- 135件のユニットテスト全てPASS
