# P004: リプレイフォルダのビルド時クリアとGit除外

## 概要
ビルドバージョンが変わるとリプレイの再現性がなくなるため、ビルドのたびにリプレイフォルダをクリアする。また、Git管理不要なファイルなので除外設定を追加。

## 背景
- リプレイはビルドバージョンに依存して再現性を持つ
- バージョン不一致のリプレイファイルは不要
- リプレイファイルはGit管理対象外

## 実装内容

### 1. Git除外設定
**ファイル**: `project/.gitignore`

```diff
debug_result.json
+assets/replays/
```

### 2. ビルド時クリア（build.rs新規作成）
**ファイル**: `project/build.rs`（新規作成）

```rust
use std::fs;
use std::path::Path;

fn main() {
    // リプレイフォルダのクリア
    let replay_dir = Path::new("assets/replays");
    if replay_dir.exists() {
        if let Ok(entries) = fs::read_dir(replay_dir) {
            for entry in entries.flatten() {
                let _ = fs::remove_file(entry.path());
            }
        }
    }

    // リプレイフォルダが変更されたら再実行
    println!("cargo:rerun-if-changed=assets/replays");
}
```

### 3. Cargo.toml更新
**ファイル**: `project/Cargo.toml`

```diff
[package]
name = "padel_game"
+build = "build.rs"
```

## 検証手順
1. `cd project && cargo build` 実行
2. `assets/replays/` 内のファイルがクリアされていることを確認
3. ゲームを実行してリプレイを生成
4. `git status` で `assets/replays/` が無視されていることを確認

## 関連
- 仕様書: `docs/7_tools/71_simulation/77103_replay_spec.md`
- 設定: `docs/8_data/87103_replay_config.md`
