// Game Configuration
// @data 80101_game_constants.md
GameConfig(
    physics: PhysicsConfig(
        gravity: -4.0,
        max_fall_speed: -10.0,
    ),
    court: CourtConfig(
        width: 12.0,
        depth: 16.0,
        ceiling_height: 100.0,
        max_jump_height: 5.0,
        net_height: 1.0,
        net_x: 0.0,
        service_box_depth: 5.0,
        // 外壁位置（コートラインより外側）
        // @spec 30503_boundary_behavior.md#beh-30503-008
        outer_wall_z: 10.0,  // Z方向（コート幅方向）、コートライン ±6.0 より外側
        outer_wall_x: 12.0,  // X方向（打ち合い方向）、コートライン ±8.0 より外側
    ),
    player: PlayerConfig(
        move_speed: 3.0,
        move_speed_z: 4.0,
        max_speed: 5.0,
        jump_force: 3.0,
        friction: 0.9,
        air_control_factor: 0.5,
        x_min: -8.0,
        x_max: 8.0,
    ),
    ball: BallConfig(
        normal_shot_speed: 3.0,
        power_shot_speed: 5.0,
        bounce_factor: 0.7,
        radius: 0.2,
        min_bounce_velocity: 1.0,
        wall_bounce_factor: 0.8,
    ),
    collision: CollisionConfig(
        character_radius: 0.5,
        z_tolerance: 0.3,
    ),
    knockback: KnockbackConfig(
        enabled: false,  // v0.2: 仕様確定後に再度有効化
        duration: 0.5,
        speed_multiplier: 0.5,
        invincibility_time: 1.0,
    ),
    shot: ShotConfig(
        max_distance: 1.5,  // 球体判定（3D距離）でのリーチ
        max_height_diff: 2.0,
        cooldown_time: 0.5,
        normal_shot_angle: 30.0,
        jump_shot_angle: 10.0,
        jump_threshold: 0.5,
        racket_swing: (
            duration_seconds: 0.42,
            contact_time_seconds: 0.18,
            contact_window_seconds: 0.16,
            min_prediction_time: 0.04,
            max_prediction_time: 0.60,
            prediction_step: 0.016666668,
            reach_distance: 2.2,
            max_hit_height_diff: 2.8,
            contact_radius: 0.38,
        ),
    ),
    scoring: ScoringConfig(
        point_values: [0, 15, 30, 40],
        games_to_win_set: 6,
        sets_to_win_match: 1,
    ),
    input: InputConfig(
        jump_buffer_time: 0.1,
        shot_buffer_time: 0.05,
        normalization_threshold: 1.0,
        input_sensitivity: 1.0,
    ),
    // @spec 20006_input_system.md#req-20006-053
    gamepad_buttons: GamepadButtonsConfig(
        jump: South,      // A button (Xbox) / × button (PlayStation)
        shot: East,       // B button (Xbox) / ○ button (PlayStation)
        stick_deadzone: 0.1,
    ),
    // @spec 30102_serve_spec.md#req-30102-060
    // @spec 30102_serve_spec.md#req-30102-080
    serve: ServeConfig(
        ball_spawn_offset_y: 2.0,       // オーバーハンドサーブの打点高さ
        serve_speed: 10.0,              // m/s
        serve_angle: -15.0,             // 度（負の値=下向き発射）
        p1_default_direction_x: 1.0,
        p2_default_direction_x: -1.0,
        // トス→ヒット方式パラメータ
        toss_start_offset_y: 1.0,       // トスボール生成高さ（手元）
        toss_velocity_y: 3.5,           // トス上向き初速度 m/s
        toss_velocity_min_y: 2.8,       // 長押し最小時のトス初速 m/s
        toss_velocity_max_y: 4.8,       // 長押し最大時のトス初速 m/s
        toss_hold_max_secs: 0.3,        // 0.3秒長押しで最大トス（以降は自動リリース）
        toss_depth_shift: 0.45,         // 高トスほど奥を狙う深さ補正量 m
        toss_launch_angle_bonus_deg: 6.0, // 高トス時の高弾道ボーナス上限 度
        practice_infinite_mode: false,  // デバッグ用途は外部上書きで制御（デフォルトはOFF）
        toss_timeout: 3.0,              // トス失敗までの時間（秒）
        hit_height_min: 1.8,            // ヒット可能最低高さ（m）
        hit_height_max: 2.7,            // ヒット可能最高高さ（m）
        hit_height_optimal: 2.2,        // AI用ヒット最適高さ（m）
        ai_hit_tolerance: 0.1,          // AI用ヒット許容範囲（m）
        serve_baseline_x_p1: -8.5,      // Player1のベースライン位置（ベースライン外側）
        serve_baseline_x_p2: 8.5,       // Player2のベースライン位置（ベースライン外側）
    ),
    shadow: ShadowConfig(
        player_size: (25.0, 10.0),
        player_alpha: 0.6,
        player_y_offset: 15.0,
        ball_size: (12.0, 5.0),
        ball_alpha: 0.5,
        ball_y_offset: 0.0,
        z_layer: -0.5,
    ),
    player_visual: PlayerVisualConfig(
        player1_color: (0.2, 0.4, 0.8),  // 青
        player2_color: (0.8, 0.2, 0.2),  // 赤
        size: (40.0, 60.0),              // 幅, 高さ
    ),
    // @spec 30301_ai_movement_spec.md
    // @spec 30302_ai_shot_spec.md
    // @spec 30102_serve_spec.md#req-30102-070
    ai: AiConfig(
        move_speed: 4.5,
        home_position_x: 7.0,
        shot_cooldown: 0.5,
        home_return_stop_distance: 0.3,
        serve_delay_min: 0.5,           // AIサーブ待機時間下限（秒）
        serve_delay_max: 1.5,           // AIサーブ待機時間上限（秒）
        serve_direction_variance: 0.5,  // AIサーブ方向バリエーション（Z軸）
        // v0.5 追加パラメータ
        optimal_depth: 5.0,             // 待機時のX軸深さ（m）
        coverage_bias_factor: 0.3,      // Z軸調整係数
        max_z_offset: 3.0,              // Z軸移動の最大値（m）
        recovery_depth: 4.0,            // リカバリー時のX軸深さ（m）
        recovery_bias_factor: 0.5,      // 打球逆サイドへの寄り係数
        max_recovery_z: 2.5,            // リカバリーZ軸の最大値（m）
        // v0.6 AI不完全性パラメータ
        // @spec 30301_ai_movement_spec.md#req-30301-052
        // @spec 30301_ai_movement_spec.md#req-30301-053
        // @spec 30302_ai_shot_spec.md#req-30302-055
        prediction_accuracy: 0.7,       // 予測精度（Normal難易度: 0.7）
        prediction_error: 0.5,          // 最大予測誤差（m）
        direction_variance: 10.0,       // 打球方向ブレ（度）
        reaction_delay: 0.15,           // 反応遅延（秒、150ms）
        // v0.4 戦術パラメータ
        // @spec 30303_ai_tactics_spec.md
        optimal_distance: 1.6,          // 攻め可能な最適距離（m）
        offensive_probability: 0.6,     // 攻め確率（60%）
        offensive_margin: 0.3,          // ライン際からのマージン（m）- 攻め時はより際を狙う
        serve_offensive_probability: 0.5, // サーブ攻め確率（50%）
        serve_offensive_margin: 0.3,    // サービスエリア端からのマージン（m）
    ),
    // @spec 30401_trajectory_spec.md#req-30401-100
    // @spec 30401_trajectory_spec.md#req-30401-101
    // @spec 30401_trajectory_spec.md#req-30401-102
    // @spec 30402_reflection_spec.md#req-30402-100
    spin_physics: SpinPhysicsConfig(
        gravity_spin_factor: 0.3,
        bounce_spin_horizontal_factor: 0.3,
        bounce_spin_vertical_factor: 0.2,
        base_air_drag: 0.0,
        spin_drag_factor: 0.3,
        spin_decay_rate: 0.5,
    ),
    // @spec 30605_trajectory_calculation_spec.md
    trajectory: TrajectoryConfig(
        landing_margin: 0.2,  // サイドライン際をより狙えるように調整
        default_landing_depth: 4.0,
        max_launch_angle: 60.0,
        spin_speed_flat: 1.0,
        spin_speed_topspin: 0.92,
        spin_speed_slice: 0.88,
        distance_speed_min: 1.0,
        distance_speed_max: 1.15,
        max_landing_deviation: 1.0,
    ),
)
