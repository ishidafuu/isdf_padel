# 9_reference Overview

## 概要

9_reference は**参照資料層**です。

**1リポジトリ = 1ゲーム + 参照ゲーム1つ**の原則に基づき、このリポジトリで開発する新規ゲームの参考となる既存ゲーム1つの仕様を記録し、新規ゲーム設計時の参考として活用します。

## 位置づけ

```
9_reference（独立層・参照専用）
  ↓ 参照される
3_ingame / 4_outgame（このリポジトリで開発する新規ゲームの仕様）
```

**重要**: 9_reference は「観察と記録」の場であり、ここから他層への依存は発生しません。

## フォルダ構成

```
project/docs/9_reference/
├── 90000_overview.md        # この文書
├── 901_reference_game/      # 参照ゲーム（1つ）の仕様
│   ├── overview.md          # ゲーム概要
│   ├── screens/             # 画面ごとの仕様
│   ├── mechanics/           # メカニクス
│   └── data/                # 数値データ
└── 902_patterns/            # 参照ゲームから抽出したパターン
    └── [パターン名].md
```

## 基本方針

### 参照ゲームは1つ

このリポジトリでは、**参照ゲームは1つ**を原則とします。

- 例: ドラゴンクエスト1風のRPGを作る → ドラクエ1を参照ゲームとして記録
- 例: スーパーマリオ風のアクションゲームを作る → マリオブラザーズを参照ゲームとして記録

複数のゲームを参考にしたい場合は、最も重要な1つを選択し、他のゲームの要素は適宜 902_patterns/ に抽出します。

## 使用方法

### 1. 参照ゲームの仕様記録

game-reference-agent を使用して、参照ゲームの仕様を 901_reference_game/ に記録します。

```
ユーザー: 「ドラクエ1の戦闘システムを記録して」
game-reference-agent → 901_reference_game/mechanics/battle.md
```

### 2. パターンの抽出

参照ゲームから特定のパターンを抽出し、902_patterns/ にまとめます。

```
902_patterns/turn_based_battle.md
- ターン制の基本構造
- コマンド選択 UI のパターン
- ダメージ計算の一般形
```

### 3. 新規ゲーム設計での参照

requirements-agent / spec-agent で参照資料を活用します。

```markdown
### REQ-30101-001: 戦闘コマンド選択
- WHEN プレイヤーのターンが開始する
- THE SYSTEM SHALL コマンドメニューを表示する
- **参考**: [90112_shot_system.md](901_reference_game/mechanics/90112_shot_system.md)
```

## 記述スタイル

9_reference の文書は、厳密な EARS 記法に縛られません：

- **観察ベース**: 「〜のように見える」「〜と推測される」も可
- **不完全でOK**: 観察できた範囲で記述
- **画像参照**: スクリーンショットへのリンクを積極的に使用

## 参照ゲームの種類

### 1. 既存の市販ゲーム（画像・説明ベース）

**エージェント**: game-reference-agent

ファミコン、スーファミなどの既存ゲームを画像やWeb情報から観察し、仕様を記録します。

**入力ソース**:
- ゲーム画面のスクリーンショット
- ユーザーの説明
- 攻略サイトの情報

### 2. レガシーソースコード（コード解析ベース）

**エージェント**: legacy-analyzer-agent

過去に自分が作成したゲームのソースコードを解析し、仕様を記録します。

**対象**:
- 大規模なC++コードベース（10万行規模）
- ドキュメントが失われたレガシーコード
- 実行不可能だが仕様を再現したいコード

**特徴**:
- Serena MCPを活用した効率的な解析
- 段階的な解析（Phase 1: 粗視化 → Phase 2: 詳細解析 → Phase 3: アルゴリズム抽出）
- 制作者の記憶との協働

**ワークフロー**:
```
レガシーコード (legacy/)
  ↓ 解析
legacy-analyzer-agent
  ↓ 記録
901_reference_game/
  ↓ 参照
新規仕様 (3_ingame, 4_outgame)
```

## 担当エージェント

| エージェント | 役割 | 対象 |
|-------------|------|------|
| game-reference-agent | 既存ゲームの観察・記録（画像・説明ベース） | 市販ゲーム、プレイ可能なゲーム |
| legacy-analyzer-agent | レガシーコードの解析・仕様化（コード解析ベース） | 自作のレガシーコード |

## 注意事項

- 9_reference から他層（3_ingame 等）への参照は禁止
- 著作権に配慮し、画像は外部リンクまたは自作のみ使用
- 参照資料は「参考」であり、完全な仕様として扱わない

---

## 関連ドキュメント

### レガシーコード解析

- [レガシーコード解析ガイド](../../../docs/guides/legacy-code-analysis.md) - Phase 1〜5の詳細な手順
- [制作者向け手順書](../../../docs/guides/legacy-code-creator.md) - 制作者の実践的なガイド
- [解析テンプレート](../../../docs/templates/legacy-analysis/README.md) - Phase 1〜3のテンプレート集

### エージェント

- [legacy-analyzer-agent](../../../.claude/agents/legacy-analyzer-agent.md) - レガシーコード解析専用エージェント
- [game-reference-agent](../../../.claude/agents/game-reference-agent.md) - 既存ゲーム観察専用エージェント
