---
id: "F035"
title: "タスク開始コミット廃止"
type: "framework"
status: "done"
priority: "medium"
spec_ids: []
blocked_by: []
blocks: []
branch_name: null
worktree_path: null
plan_file: "~/.claude/plans/enumerated-crafting-snowglobe.md"
tags: ["task-management", "workflow"]
parent_task_id: null
created_at: "2026-01-07T12:00:00"
updated_at: "2026-01-07T14:30:00"
completed_at: "2026-01-07T14:45:00"
---

# Task F035: タスク開始コミット廃止

## Summary

**目的**: 1タスク = 3コミット → 1タスク = 1コミット に簡素化

**現状の問題**:
1. タスク開始コミット（MAIN側）
2. 実装コミット（worktree側）
3. タスク完了コミット（MAIN側）

**新フロー（worktree存在チェック方式）**:
- MAIN側: ファイル移動・status更新・worktree作成（コミットなし）
- worktree側: 実装 + タスクファイル変更をまとめてコミット
- マージ時: スカッシュマージで1コミット

**制限事項**:
- game-dev以外（PXXX, FXXX）: worktree作らないため `git worktree list` で検出不可
- 並列作業確認: `ls project/tasks/2_in-progress/` → `git worktree list` に変更

## Related Specifications

- なし（フレームワークドキュメント変更のみ）

## Progress

### Completed

- [x] task-operations.md 編集（CRITICAL注記をNOTEに、コミット手順削除）
- [x] task-lifecycle.md 編集（図からコミットステップ削除）
- [x] task-manager-agent.md 編集（フロー・実行例からコミット削除）
- [x] session-manager-agent.md 編集（並列検出方法を git worktree list に変更）
- [x] impl-agent.md 編集（タスク確認方法に git worktree list 追加）
- [x] docs/concepts/tasks.md 編集（フロー更新、1タスク=1コミット説明追加）
- [x] quickstart.md 編集（軽微な注記追加）

## Next Actions

1. ~~タスク開始~~ ✓
2. ~~6つのドキュメントを順次編集~~ ✓
3. ~~整合性確認~~ ✓
4. コミット ← **現在**

## Dependencies

- **Blocked By:** なし
- **Blocks:** なし

## Detailed Implementation Plan

### 変更対象ファイル（優先順）

### 1. `.claude/skills/task-operations.md`
**変更箇所**: 行23-55（タスク開始）、行82-123（タスク完了）
- CRITICAL注記を NOTE に変更
- 「コミット（MAIN側で並列作業状況を記録）」手順を削除
- 並列作業確認方法を `git worktree list` に変更
- 制限事項を追記

### 2. `.claude/skills/task-lifecycle.md`
**変更箇所**: 行105-178（タスク開始の操作フロー）
- 図中のステップ5「コミット」を削除（4ステップに）
- CRITICAL注記を NOTE に変更
- 制限事項を追記

### 3. `.claude/agents/task-manager-agent.md`
**変更箇所**: 行286-310（タスク開始フロー）、行476-480（実行例）
- フローからコミット手順を削除
- 実行例のコミットコマンドを削除
- 並列作業確認方法を `git worktree list` に変更

### 4. `.claude/agents/session-manager-agent.md`
**変更箇所**: 行62-81（Markdownタスク連携）
- 並列作業検出方法を `git worktree list` に変更
- 制限事項を追記

### 5. `.claude/agents/impl-agent.md`
**変更箇所**: 行53-66（Phase 0: タスク確認）
- タスク確認方法に `git worktree list` を追加
- game-dev / PXXX,FXXX の違いを説明

### 6. `docs/concepts/tasks.md`
**変更箇所**: 行166-195（基本操作フロー）
- フローを更新（タスク開始時コミットなし）
- 「1タスク = 1コミット」の説明を追加
- 並列作業確認方法の変更を説明

### 7. `docs/tutorials/quickstart.md`（軽微）
**変更箇所**: 行357-370（タスク開始）
- 現状でもコミット言及なし、変更不要または軽微

---

## 主な変更内容

### タスク開始フロー（変更前）
```
MAIN側:
1. ファイル移動
2. status更新
3. worktree作成
4. branch_name, worktree_path更新
5. コミット  ← 削除
6. worktreeに移動
```

### タスク開始フロー（変更後）
```
MAIN側:
1. ファイル移動
2. status更新
3. worktree作成
4. branch_name, worktree_path更新
※ コミットしない

worktree側:
5. 実装作業開始
```

### 並列作業確認方法（変更後）
```bash
# 推奨（game-devタスク）
git worktree list

# 補助的（全タスク）
ls project/tasks/2_in-progress/
```
