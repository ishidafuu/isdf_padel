---
id: "F034"
title: "タスク完了コミット統合"
type: "framework"
status: "done"
priority: "medium"
spec_ids: []
blocked_by: []
blocks: []
branch_name: null
worktree_path: null
plan_file: "~/.claude/plans/encapsulated-booping-codd.md"
tags: ["task-management", "workflow"]
created_at: "2025-01-07T12:00:00+09:00"
updated_at: "2025-01-07T12:30:00+09:00"
completed_at: "2025-01-07T12:30:00+09:00"
---

## 説明

タスク完了時の状態遷移（`chore(30XXX): タスク完了（done）に移行`）を別コミットにせず、実装コミット（feat/fix）に含める改善。

## 背景・問題

現状のフローでは、game-dev タスク完了時に2つのコミットが発生：
1. `feat(30XXX): 機能実装` - スカッシュマージ
2. `chore(30XXX): タスク完了（done）に移行` - タスクファイル更新

これが冗長で、コミット履歴が煩雑になる。

## 実装内容

- [x] task-operations.md の game-dev タスク完了フローを修正
- [x] task-manager-agent.md の完了フロー説明を修正
- [x] task-lifecycle.md の整合性確認（変更不要）

## 改善後のフロー

```bash
# 1. スカッシュマージ（コミットせず）
git merge --squash branch

# 2. タスクファイル更新
mv tasks/3_in-review/... tasks/4_archive/
Edit(status, completed_at, ...)

# 3. タスクファイルもステージング
git add tasks/4_archive/...

# 4. まとめてコミット
git commit -m "feat(30XXX): ..."
```

## Progress

- **Current Phase:** Todo

## Next Actions

1. タスクを開始（in-progress へ移行）
2. task-operations.md を修正
3. task-manager-agent.md を修正
4. task-lifecycle.md を確認
5. コミット

## メモ

- 影響範囲: game-dev タスク（30XXX）の完了フローのみ
- project-wide / framework タスクは worktree を使わないため影響なし
