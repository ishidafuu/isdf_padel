---
id: "F043"
title: "レビュー必須化バリデーション追加"
type: "framework"
status: "done"
priority: "high"
spec_ids: []
blocked_by: []
blocks: []
branch_name: null
worktree_path: null
plan_file: "~/.claude/plans/modular-discovering-candy.md"
tags: ["task-management", "review", "validation"]
created_at: "2025-01-07T12:00:00+09:00"
updated_at: "2025-01-07T12:00:00+09:00"
completed_at: "2026-01-07T12:30:00+09:00"
---

## 説明

game-dev タスク（30XXX）のレビューがスキップされる問題を修正。
タスク完了処理に「in-review 経由チェック」を追加する。

## 問題の根本原因

`task-manager-agent.md` のタスク完了フローで、タスクが `3_in-review/` にあることを検証していない。

結果として `2_in-progress/` から直接 `4_archive/` に移動できてしまう。

## 修正対象ファイル

1. `.claude/agents/task-manager-agent.md`
   - タスク完了フローに「in-review 確認ステップ」を追加

2. `.claude/skills/task-operations.md`
   - タスク完了操作に「前提条件チェック」を追加

## 実装内容

### 1. task-manager-agent.md の修正

「2. タスク完了フロー」セクションに以下を追加:

- game-dev タスクの完了前に `3_in-review/` にあるか確認
- 条件を満たさない場合はエラー表示して中断

### 2. task-operations.md の修正

「4. タスク完了」セクションに前提条件チェックを追加

## 検証方法

1. game-dev タスクを `2_in-progress/` から直接完了しようとした場合にエラーが表示されること
2. `3_in-review/` にあるタスクは正常に完了できること
3. FXXX/PXXX タスクはチェックをスキップして直接完了できること

## 影響範囲

- game-dev タスク（30XXX）のみ影響
- FXXX/PXXX タスクは変更なし（従来通り in-review 不要）

## Progress

- **Current Phase:** Complete
- **Completed Steps:**
  - [x] 問題の調査・原因特定
  - [x] プラン作成
  - [x] task-manager-agent.md に前提条件チェックを追加
  - [x] task-operations.md に前提条件チェックを追加

## Next Actions

1. なし（実装完了）
