---
id: "F048"
title: "定期コード監査機能追加"
type: "framework"
status: "done"
priority: "medium"
related_task: null
spec_ids: []
blocked_by: []
blocks: []
branch_name: null
worktree_path: null
plan_file: "~/.claude/plans/floofy-wandering-lemon.md"
tags: ["audit", "code-quality", "refactor"]
parent_task_id: null
created_at: "2026-01-07T12:00:00+09:00"
updated_at: "2026-01-07T14:00:00+09:00"
completed_at: "2026-01-07T14:00:00+09:00"
---

# Task F048: 定期コード監査機能追加

## Summary

プロジェクト全体の定期的な健康診断を実施し、問題をカテゴリ別にリファクタタスク（R30XXX-NNN）として自動生成する機能を追加する。

## 背景

- 現状、全体コードレビューを行う標準的なフローがない
- review-agent は個別タスク完了後のレビュー（リアクティブ）
- 定期的なプロアクティブな診断機能が必要

## 成果物

| ファイル | 種類 | 説明 |
|----------|------|------|
| `.claude/agents/audit-agent.md` | エージェント | 監査ガイドライン |
| `.claude/skills/code-audit.md` | スキル | 診断手順・チェック項目 |
| `.claude/commands/code-audit.md` | コマンド | 監査実行コマンド |

## 更新対象

| ファイル | 更新内容 |
|----------|---------|
| `.claude/commands/README.md` | コマンド一覧に追加 |
| `CLAUDE.md` | エージェント一覧に追加 |

## Progress

### Completed

1. `.claude/skills/code-audit.md` 作成 - 診断手順、チェック項目、タスク化テンプレート
2. `.claude/commands/code-audit.md` 作成 - コマンドオプション、実行手順
3. `.claude/agents/audit-agent.md` 作成 - 監査ガイドライン、責務境界
4. `.claude/commands/README.md` 更新 - 監査コマンドセクション追加
5. `.claude/CLAUDE.md` 更新 - エージェント一覧に audit-agent 追加、スキル一覧に code-audit.md 追加

## Next Actions

（完了）

## Dependencies

- **Blocked By:** なし
- **Blocks:** なし

## Detailed Implementation Plan

プランファイル参照: `~/.claude/plans/floofy-wandering-lemon.md`

### 診断カテゴリ

1. **仕様整合性**: `/impl-validate` 活用
2. **依存関係**: `/deps-check` 活用
3. **コード品質**: 複雑度、重複コード（独自分析）
4. **アーキテクチャ**: レイヤー違反、責務過多（独自分析）

### 出力形式

診断レポート → 推奨タスク一覧 → ユーザー確認 → R30XXX-NNN タスク生成

## 完了チェックリスト

- [x] `.claude/skills/code-audit.md` 作成
- [x] `.claude/commands/code-audit.md` 作成
- [x] `.claude/agents/audit-agent.md` 作成
- [x] `.claude/commands/README.md` 更新
- [x] `CLAUDE.md` 更新
- [x] 変更内容の検証完了
- [x] ドキュメント整合性確認

## メモ

- ユーザー選択: 診断観点は全部含める（仕様整合性 + 依存関係 + コード品質 + アーキテクチャ）
- ユーザー選択: タスク粒度は問題カテゴリ別
