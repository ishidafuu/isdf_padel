---
id: F053
title: CLAUDE.md トークン削減
status: done
priority: medium
created: 2025-01-09
---

# F053: CLAUDE.md トークン削減

## 概要

`.claude/CLAUDE.md` のトークン数を 7.7k → 約 3.5k に削減する（約50%削減）

## 背景

- CLAUDE.md が 7.7k tokens でコンテキストの約4%を占有
- 外部参照で代替可能な情報や重複が多い
- 削減により他の情報に使えるコンテキスト容量が増える

## 削減方針

### 削除対象（❌）

| セクション | 理由 |
|-----------|------|
| 困った時の参照先テーブル | `docs/index.md` で代替可能 |
| エージェント一覧テーブル | `/agents` コマンドで確認可能 |
| コマンド設計思想 | 冗長、必要時に参照で十分 |
| タスク配置ルール詳細 | タスク種別テーブルと重複 |
| タスクファイル構造ツリー | ディレクトリ構成と重複 |
| ガイドラインに基づく処理 | 各エージェントファイルに記載済み |
| スキル一覧テーブル | `/skills` コマンドで確認可能 |

### 圧縮対象（⚠️）

| セクション | 圧縮方法 |
|-----------|---------|
| タスクワークフロー | テーブルのみ残し、フロー図削除 |
| ECS設計原則 | 禁止パターンのみ残し、正しいパターン簡略化 |
| 1タスク=1コミット | フロー図削除、1行説明に |
| フェーズ管理 | 2行に圧縮 |
| 人間専用コマンド | テーブル削除、箇条書きに |
| 並列セッション実行 | ポリシーテーブルのみ、例は委譲 |
| 除外設定 | 3行に圧縮 |

### 保持対象（✅）

- プロジェクト概要
- ディレクトリ構成（ツリー部分）
- 仕様書駆動原則
- test.md禁止
- ハードコーディング禁止（コード例含む）
- ECS設計原則（禁止パターン）
- タスク種別テーブル
- 思考バジェット

## 実装手順

1. 削除対象セクションを削除
2. 圧縮対象セクションを圧縮
3. トークン数確認（目標: 3,500以下）
4. 動作確認（/context で正しく読み込まれるか）

## 検証方法

```bash
# 実際の確認
/context
```

## 対象ファイル

- `.claude/CLAUDE.md`

## 完了条件

- [x] トークン数が 4,000 以下 (137行、6,009バイト → 推定2-3kトークン)
- [x] 必須ルール（6つ）が保持されている
- [x] /context で正常に読み込まれる
