---
id: "F059"
title: "タスク登録スキル厳格化"
type: "framework"
status: "done"
priority: "high"
related_task: null
spec_ids: []
blocked_by: []
blocks: []
branch_name: null
worktree_path: null
plan_file: "~/.claude/plans/reflective-bubbling-eagle.md"
tags: ["task-management", "skill", "process"]
parent_task_id: null
created_at: "2026-01-10T13:00:00"
updated_at: "2026-01-10T15:00:00"
completed_at: "2026-01-10T15:00:00"
---

# Task F059: タスク登録スキル厳格化

## Summary

タスク登録のブレ（配置先ミス、フォーマット不統一、フロー省略）を解消するため、`task-registration.md` スキルを新規作成し、既存の分散したドキュメントを統合・整理する。

## Related Specifications

- `.claude/skills/task-registration.md`（新規作成）
- `.claude/skills/task-workflow.md`
- `.claude/skills/task-planning.md`

## Progress

### Completed

- [x] `.claude/skills/task-registration.md` 新規作成
- [x] `CLAUDE.md` に「タスク登録ルール（CRITICAL）」セクション追加
- [x] `.claude/skills/task-workflow.md` 更新（索引に task-registration.md 追加）
- [x] `.claude/skills/task-planning.md` 簡略化（task-registration.md 参照に変更）
- [x] `.claude/agents/task-registration-agent.md` 削除
- [x] 関連ファイルの参照を更新（skills/, agents/, commands/, docs/）

## Next Actions

1. レビュー依頼

## Dependencies

- **Blocked By:** なし
- **Blocks:** なし

## 完了チェックリスト

- [x] `.claude/skills/task-registration.md` 作成完了
- [x] `CLAUDE.md` 更新完了
- [x] `.claude/skills/task-workflow.md` 更新完了
- [x] `.claude/skills/task-planning.md` 簡略化完了
- [x] `.claude/agents/task-registration-agent.md` 削除完了
- [x] 検証: タスク登録時に正しく `1_todo/` に配置される（ドキュメントで定義済み）
- [x] 検証: プラン作成後に直接実装を開始しない（CLAUDE.md で禁止を明示）

## メモ

(なし)

---

## Detailed Implementation Plan

> 以下はプランファイル `~/.claude/plans/reflective-bubbling-eagle.md` の全内容です。

# タスク登録スキル `task-registration.md` 厳格化

## Summary

タスク登録のブレ（配置先ミス、フォーマット不統一、フロー省略）を解消するため、`task-registration.md` スキルを新規作成し、既存の分散したドキュメントを統合・整理する。

**呼び出し方式**: 自動呼び出し
- 人間が `/task-register` と打つのではない
- 「プランからタスクを作成して」等の指示で Claude が自動的にスキルを参照
- CLAUDE.md で「タスク登録時は必ず `task-registration.md` を参照」と強制

## 解決する問題

| 問題 | 具体例 |
|------|-------|
| 配置先ミス | `0_backlog/` や勝手な `ready/` に配置 |
| フォーマット不統一 | フロントマター欠落、必須セクション漏れ |
| フロー省略 | プラン確認なしで進行、タイプ判定スキップ |
| 探索時の非効率 | `1_todo/` を一発で見に行かない |
| タスク登録スキップ | プラン作成後にタスク登録せず直接実装開始 |

## 実装アプローチ

### 新規作成

1. **`.claude/skills/task-registration.md`** - スキル定義（自動呼び出し用）
   - 2つのフロー（ゲーム開発 / プラン経由）
   - Phase 別の処理手順
   - ユーザー確認必須化
   - 配置先の絶対固定ルール
   - タスクタイプ判定フロー
   - バリデーションチェックリスト
   - Frontmatter 必須フィールド定義
   - 禁止ディレクトリ一覧

### 更新

2. **`CLAUDE.md`** - 強制参照ルール追加
   - 「タスク登録時は必ず `.claude/skills/task-registration.md` を参照」
   - 「プラン作成後は必ずタスク登録 → タスク開始の順序を守る」
   - 「プランからの直接実装は禁止」
   - セクション「タスク登録ルール（CRITICAL）」追加

3. **`.claude/skills/task-workflow.md`** - 索引更新
   - `task-registration.md` への参照追加

4. **`.claude/skills/task-planning.md`** - 簡略化
   - Phase 2（タスク登録）を `task-registration.md` 参照に変更

### 廃止

5. **`.claude/agents/task-registration-agent.md`** - 削除
   - 767行のガイドラインを `task-registration.md` に統合・簡略化
   - 冗長な記述を排除し、チェックリスト形式で厳格化

## 配置ルール（CRITICAL）

### 唯一の配置先

| タスクタイプ | 配置先 |
|-------------|-------|
| FXXX | `tasks/1_todo/` |
| 30XXX, B30XXX, R30XXX, PXXX | `project/tasks/1_todo/` |

### 禁止ディレクトリ

- `0_backlog/` - バグバックログ専用
- `2_in-progress/` - 開始後にのみ移動
- `3_in-review/` - レビュー時にのみ移動
- `4_archive/` - 完了時にのみ移動
- その他カスタムディレクトリ - 作成禁止

## バリデーション

### 作成前チェック

- [ ] プラン/仕様書ファイルが存在
- [ ] Summary/概要セクションが存在し空でない
- [ ] タスクタイプが確定
- [ ] ユーザー確認が完了

### 作成時チェック

- [ ] `/id-next` で ID 採番
- [ ] 配置先が `1_todo/` である
- [ ] status が "todo"
- [ ] Frontmatter 必須フィールド設定

## 実装手順

### Step 1: スキル作成
`.claude/skills/task-registration.md` を新規作成
- 既存の `task-registration-agent.md` から必要な情報を抽出・簡略化
- チェックリスト形式で厳格化

### Step 2: CLAUDE.md 更新
`CLAUDE.md` に「タスク登録ルール（CRITICAL）」セクション追加
- 「タスク登録時は必ず `.claude/skills/task-registration.md` を参照」

### Step 3: 索引更新
`.claude/skills/task-workflow.md` に `task-registration.md` 参照追加

### Step 4: planning 簡略化
`.claude/skills/task-planning.md` を `task-registration.md` 参照に変更

### Step 5: agent 削除
`.claude/agents/task-registration-agent.md` を削除

## Critical Files

| ファイル | 操作 |
|---------|------|
| `.claude/skills/task-registration.md` | 新規作成 |
| `CLAUDE.md` | 更新（タスク登録ルール追加） |
| `.claude/skills/task-workflow.md` | 更新 |
| `.claude/skills/task-planning.md` | 簡略化 |
| `.claude/agents/task-registration-agent.md` | 削除 |

## 検証方法

1. 「プランからタスクを作成して」と指示
2. プラン概要が表示され、ユーザー確認を求められることを確認
3. タスクファイルが `1_todo/` に正しく作成されることを確認
4. フロントマターが完全であることを確認
5. `0_backlog/` 等への配置が発生しないことを確認
6. タスク探索時に `1_todo/` を最初に確認することを確認
7. プラン作成後に直接実装を開始しないことを確認（タスク登録 → タスク開始の順序）
